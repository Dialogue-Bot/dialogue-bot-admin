FROM node:20

ARG VITE_SIGNATURE_SECRET
ARG VITE_STRIPE_PUBLIC_KEY
ARG VITE_PROD_API_URL
ARG VITE_DEV_API_URL

ENV VITE_SIGNATURE_SECRET=$VITE_SIGNATURE_SECRET
ENV VITE_STRIPE_PUBLIC_KEY=$VITE_STRIPE_PUBLIC_KEY
ENV VITE_PROD_API_URL=$VITE_PROD_API_URL
ENV VITE_DEV_API_URL=$VITE_DEV_API_URL

WORKDIR /app

COPY package.json .

RUN npm install 

COPY . .

RUN npm run build

EXPOSE 5173

CMD [ "npm", "run", "start" ]